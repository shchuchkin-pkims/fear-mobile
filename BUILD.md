# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Å–±–æ—Ä–∫–µ F.E.A.R. Messenger –¥–ª—è Android

–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Å–±–æ—Ä–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤.

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [–¢—Ä–µ–±–æ–≤–∞–Ω–∏—è](#—Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è)
- [–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è](#–ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–æ–∫—Ä—É–∂–µ–Ω–∏—è)
- [–°–±–æ—Ä–∫–∞ Debug –≤–µ—Ä—Å–∏–∏](#—Å–±–æ—Ä–∫–∞-debug-–≤–µ—Ä—Å–∏–∏)
- [–°–±–æ—Ä–∫–∞ Release –≤–µ—Ä—Å–∏–∏](#—Å–±–æ—Ä–∫–∞-release-–≤–µ—Ä—Å–∏–∏)
- [–†–∞–±–æ—Ç–∞ —Å Opus –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π](#—Ä–∞–±–æ—Ç–∞-—Å-opus-–±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π)
- [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º)

---

## –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

### –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **OS**: Windows 10/11, macOS 11+, –∏–ª–∏ Linux (Ubuntu 20.04+)
- **RAM**: –ú–∏–Ω–∏–º—É–º 8 GB (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è 16 GB)
- **–î–∏—Å–∫–æ–≤–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ**: –ú–∏–Ω–∏–º—É–º 10 GB —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ

1. **JDK (Java Development Kit)**
   - –í–µ—Ä—Å–∏—è: JDK 17 –∏–ª–∏ –Ω–æ–≤–µ–µ
   - –°–∫–∞—á–∞—Ç—å: [Oracle JDK](https://www.oracle.com/java/technologies/downloads/) –∏–ª–∏ [OpenJDK](https://adoptium.net/)

2. **Android Studio**
   - –í–µ—Ä—Å–∏—è: Hedgehog (2023.1.1) –∏–ª–∏ –Ω–æ–≤–µ–µ
   - –°–∫–∞—á–∞—Ç—å: [Android Studio](https://developer.android.com/studio)

3. **Android SDK**
   - –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: API 24 (Android 7.0)
   - –¶–µ–ª–µ–≤–∞—è –≤–µ—Ä—Å–∏—è: API 34 (Android 14)
   - Build Tools: 34.0.0

4. **Android NDK (Native Development Kit)**
   - –í–µ—Ä—Å–∏—è: 25.1.8937393 –∏–ª–∏ –Ω–æ–≤–µ–µ
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Android Studio SDK Manager

5. **CMake**
   - –í–µ—Ä—Å–∏—è: 3.22.1 –∏–ª–∏ –Ω–æ–≤–µ–µ
   - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ Android Studio SDK Manager

6. **Git**
   - –î–ª—è –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
   - –°–∫–∞—á–∞—Ç—å: [Git](https://git-scm.com/)

---

## –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ JDK

#### Windows:
```bash
# –°–∫–∞—á–∞–π—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ —Å —Å–∞–π—Ç–∞ Oracle –∏–ª–∏ Adoptium
# –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:
java -version
javac -version
```

#### macOS:
```bash
# –ò—Å–ø–æ–ª—å–∑—É—è Homebrew:
brew install openjdk@17

# –î–æ–±–∞–≤—å—Ç–µ –≤ PATH:
echo 'export PATH="/opt/homebrew/opt/openjdk@17/bin:$PATH"' >> ~/.zshrc
source ~/.zshrc

# –ü—Ä–æ–≤–µ—Ä–∫–∞:
java -version
```

#### Linux (Ubuntu/Debian):
```bash
sudo apt update
sudo apt install openjdk-17-jdk

# –ü—Ä–æ–≤–µ—Ä–∫–∞:
java -version
```

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Android Studio

1. –°–∫–∞—á–∞–π—Ç–µ Android Studio —Å [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://developer.android.com/studio)
2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤—â–∏–∫ –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º
3. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ Android Studio —É—Å—Ç–∞–Ω–æ–≤–∏—Ç Android SDK

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Android SDK –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–û—Ç–∫—Ä–æ–π—Ç–µ Android Studio ‚Üí Settings/Preferences ‚Üí Appearance & Behavior ‚Üí System Settings ‚Üí Android SDK

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:

**SDK Platforms:**
- ‚úÖ Android 14.0 (API 34)
- ‚úÖ Android 7.0 (API 24)

**SDK Tools:**
- ‚úÖ Android SDK Build-Tools 34.0.0
- ‚úÖ NDK (Side by side) - –≤–µ—Ä—Å–∏—è 25.1.8937393 –∏–ª–∏ –Ω–æ–≤–µ–µ
- ‚úÖ CMake - –≤–µ—Ä—Å–∏—è 3.22.1 –∏–ª–∏ –Ω–æ–≤–µ–µ
- ‚úÖ Android SDK Command-line Tools
- ‚úÖ Android Emulator (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Windows:
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ:
ANDROID_HOME = C:\Users\YourUsername\AppData\Local\Android\Sdk
JAVA_HOME = C:\Program Files\Java\jdk-17

# –î–æ–±–∞–≤—å—Ç–µ –≤ PATH:
%ANDROID_HOME%\platform-tools
%ANDROID_HOME%\tools
%JAVA_HOME%\bin
```

#### macOS/Linux:
```bash
# –î–æ–±–∞–≤—å—Ç–µ –≤ ~/.bashrc –∏–ª–∏ ~/.zshrc:
export ANDROID_HOME=$HOME/Android/Sdk
export JAVA_HOME=/usr/lib/jvm/java-17-openjdk-amd64  # –ü—É—Ç—å –º–æ–∂–µ—Ç –æ—Ç–ª–∏—á–∞—Ç—å—Å—è
export PATH=$PATH:$ANDROID_HOME/platform-tools
export PATH=$PATH:$ANDROID_HOME/tools
export PATH=$PATH:$JAVA_HOME/bin

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:
source ~/.bashrc  # –∏–ª–∏ source ~/.zshrc
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤—Å–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã:
java -version      # –î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤–µ—Ä—Å–∏—è 17 –∏–ª–∏ –Ω–æ–≤–µ–µ
./gradlew --version  # –ü–æ—Å–ª–µ –∫–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
adb version        # Android Debug Bridge
cmake --version    # CMake
```

---

## –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
git clone https://github.com/shchuchkin-pkims/fear-mobile.git

# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd fear-mobile

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É
ls -la
```

---

## –°–±–æ—Ä–∫–∞ Debug –≤–µ—Ä—Å–∏–∏

Debug –≤–µ—Ä—Å–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ –æ—Ç–ª–∞–¥–∫–∏. –û–Ω–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –æ—Ç–ª–∞–¥–æ—á–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥–ø–∏—Å–∏ –∫–ª—é—á–æ–º.

### –ß–µ—Ä–µ–∑ Android Studio

1. –û—Ç–∫—Ä–æ–π—Ç–µ Android Studio
2. File ‚Üí Open ‚Üí –≤—ã–±–µ—Ä–∏—Ç–µ –ø–∞–ø–∫—É `fear-mobile`
3. –î–æ–∂–¥–∏—Ç–µ—Å—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ Gradle
4. Build ‚Üí Make Project (Ctrl+F9 / Cmd+F9)
5. Build ‚Üí Build Bundle(s) / APK(s) ‚Üí Build APK(s)

APK –±—É–¥–µ—Ç –≤: `app/build/outputs/apk/debug/app-debug.apk`

### –ß–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É

```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd fear-mobile

# –°–±–æ—Ä–∫–∞ Debug APK
./gradlew assembleDebug

# –î–ª—è Windows –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ:
# gradlew.bat assembleDebug

# APK –±—É–¥–µ—Ç –≤: app/build/outputs/apk/debug/app-debug.apk
```

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Debug APK –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ USB –∏–ª–∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —ç–º—É–ª—è—Ç–æ—Ä

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
adb devices

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ APK
adb install -r app/build/outputs/apk/debug/app-debug.apk

# –§–ª–∞–≥ -r –∑–∞–º–µ–Ω—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
```

---

## –°–±–æ—Ä–∫–∞ Release –≤–µ—Ä—Å–∏–∏

Release –≤–µ—Ä—Å–∏—è –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –∏ –ø–æ–¥–ø–∏—Å–∞–Ω–∞ –¥–ª—è —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è.

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ keystore (–µ—Å–ª–∏ –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–Ω)

```bash
# –°–æ–∑–¥–∞–π—Ç–µ keystore –¥–ª—è –ø–æ–¥–ø–∏—Å–∏ APK
keytool -genkey -v -keystore fear-app.keystore \
  -alias fearapp \
  -keyalg RSA \
  -keysize 2048 \
  -validity 10000 \
  -storepass yourpassword \
  -keypass yourpassword \
  -dname "CN=F.E.A.R. Messenger, OU=Development, O=FEAR Project, L=Unknown, ST=Unknown, C=RU"

# –í–ê–ñ–ù–û: –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ keystore –∏ –ø–∞—Ä–æ–ª–∏ –≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ–º –º–µ—Å—Ç–µ!
# –ë–µ–∑ keystore –≤—ã –Ω–µ —Å–º–æ–∂–µ—Ç–µ –æ–±–Ω–æ–≤–ª—è—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ –±—É–¥—É—â–µ–º!
```

### –®–∞–≥ 2: –°–±–æ—Ä–∫–∞ unsigned APK

```bash
# –û—á–∏—Å—Ç–∫–∞ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —Å–±–æ—Ä–æ–∫
./gradlew clean

# –°–±–æ—Ä–∫–∞ Release APK (–±–µ–∑ –ø–æ–¥–ø–∏—Å–∏)
./gradlew assembleRelease

# APK –±—É–¥–µ—Ç –≤: app/build/outputs/apk/release/app-release-unsigned.apk
```

### –®–∞–≥ 3: –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ APK (zipalign)

```bash
# –ü—É—Ç—å –∫ zipalign (–∏–∑–º–µ–Ω–∏—Ç–µ –≤–µ—Ä—Å–∏—é build-tools –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
ZIPALIGN=$ANDROID_HOME/build-tools/34.0.0/zipalign

# –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ APK
$ZIPALIGN -v -p 4 \
  app/build/outputs/apk/release/app-release-unsigned.apk \
  app/build/outputs/apk/release/app-release-aligned.apk
```

### –®–∞–≥ 4: –ü–æ–¥–ø–∏—Å—å APK (apksigner)

```bash
# –ü—É—Ç—å –∫ apksigner
APKSIGNER=$ANDROID_HOME/build-tools/34.0.0/apksigner

# –ü–æ–¥–ø–∏—Å–∞—Ç—å APK
$APKSIGNER sign \
  --ks fear-app.keystore \
  --ks-pass pass:yourpassword \
  --key-pass pass:yourpassword \
  --ks-key-alias fearapp \
  --out app/build/outputs/apk/release/F.E.A.R.Messenger-release.apk \
  app/build/outputs/apk/release/app-release-aligned.apk
```

### –®–∞–≥ 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–ø–∏—Å–∏

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–ø–∏—Å—å APK
$APKSIGNER verify --print-certs \
  app/build/outputs/apk/release/F.E.A.R.Messenger-release.apk

# –í—ã—á–∏—Å–ª–∏—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å–Ω—É—é —Å—É–º–º—É
sha256sum app/build/outputs/apk/release/F.E.A.R.Messenger-release.apk
```

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–±–æ—Ä–∫–∞ Release

–°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç `build-release.sh`:

```bash
#!/bin/bash

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
KEYSTORE_PATH="fear-app.keystore"
KEYSTORE_PASS="yourpassword"
KEY_ALIAS="fearapp"
VERSION="0.3.1"

# –ü—É—Ç–∏
ZIPALIGN="$ANDROID_HOME/build-tools/34.0.0/zipalign"
APKSIGNER="$ANDROID_HOME/build-tools/34.0.0/apksigner"

echo "=== Building F.E.A.R. Messenger v$VERSION ==="

# –û—á–∏—Å—Ç–∫–∞
echo "1. Cleaning..."
./gradlew clean

# –°–±–æ—Ä–∫–∞
echo "2. Building release APK..."
./gradlew assembleRelease

# –í—ã—Ä–∞–≤–Ω–∏–≤–∞–Ω–∏–µ
echo "3. Aligning APK..."
$ZIPALIGN -v -p 4 \
  app/build/outputs/apk/release/app-release-unsigned.apk \
  app/build/outputs/apk/release/app-release-aligned.apk

# –ü–æ–¥–ø–∏—Å—å
echo "4. Signing APK..."
$APKSIGNER sign \
  --ks $KEYSTORE_PATH \
  --ks-pass pass:$KEYSTORE_PASS \
  --key-pass pass:$KEYSTORE_PASS \
  --ks-key-alias $KEY_ALIAS \
  --out release/F.E.A.R.Messenger-v$VERSION-release.apk \
  app/build/outputs/apk/release/app-release-aligned.apk

# –ü—Ä–æ–≤–µ—Ä–∫–∞
echo "5. Verifying signature..."
$APKSIGNER verify --print-certs release/F.E.A.R.Messenger-v$VERSION-release.apk

# –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω–∞—è —Å—É–º–º–∞
echo "6. Calculating checksum..."
sha256sum release/F.E.A.R.Messenger-v$VERSION-release.apk

echo "=== Build complete! ==="
echo "APK: release/F.E.A.R.Messenger-v$VERSION-release.apk"
```

–ó–∞–ø—É—Å–∫:
```bash
chmod +x build-release.sh
./build-release.sh
```

---

## –†–∞–±–æ—Ç–∞ —Å Opus –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ Opus –≤ –ø—Ä–æ–µ–∫—Ç–µ

–ü—Ä–æ–µ–∫—Ç —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç prebuilt Opus –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –¥–ª—è –≤—Å–µ—Ö –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä:

```
app/src/main/cpp/opus/
‚îú‚îÄ‚îÄ include/
‚îÇ   ‚îî‚îÄ‚îÄ opus/
‚îÇ       ‚îú‚îÄ‚îÄ opus.h
‚îÇ       ‚îú‚îÄ‚îÄ opus_defines.h
‚îÇ       ‚îú‚îÄ‚îÄ opus_types.h
‚îÇ       ‚îî‚îÄ‚îÄ opus_multistream.h
‚îî‚îÄ‚îÄ libs/
    ‚îú‚îÄ‚îÄ arm64-v8a/
    ‚îÇ   ‚îî‚îÄ‚îÄ libopus.so
    ‚îú‚îÄ‚îÄ armeabi-v7a/
    ‚îÇ   ‚îî‚îÄ‚îÄ libopus.so
    ‚îú‚îÄ‚îÄ x86/
    ‚îÇ   ‚îî‚îÄ‚îÄ libopus.so
    ‚îî‚îÄ‚îÄ x86_64/
        ‚îî‚îÄ‚îÄ libopus.so
```

### –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å Opus (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

#### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è:
- CMake 3.22.1+
- NDK 25.1.8937393+
- Python 3.7+ (–¥–ª—è —Å–∫—Ä–∏–ø—Ç–æ–≤ —Å–±–æ—Ä–∫–∏)

#### –°–±–æ—Ä–∫–∞ Opus –∏–∑ –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤:

```bash
# 1. –°–∫–∞—á–∞–π—Ç–µ –∏—Å—Ö–æ–¥–Ω–∏–∫–∏ Opus
wget https://archive.mozilla.org/pub/opus/opus-1.3.1.tar.gz
tar -xzf opus-1.3.1.tar.gz
cd opus-1.3.1

# 2. –°–æ–∑–¥–∞–π—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏ –¥–ª—è Android
cat > build-android.sh << 'EOF'
#!/bin/bash

NDK_PATH=$ANDROID_HOME/ndk/25.1.8937393
TOOLCHAIN=$NDK_PATH/build/cmake/android.toolchain.cmake
BUILD_DIR=build-android

for ARCH in arm64-v8a armeabi-v7a x86 x86_64; do
  echo "Building for $ARCH..."
  mkdir -p $BUILD_DIR/$ARCH
  cd $BUILD_DIR/$ARCH

  cmake ../.. \
    -DCMAKE_TOOLCHAIN_FILE=$TOOLCHAIN \
    -DANDROID_ABI=$ARCH \
    -DANDROID_PLATFORM=android-24 \
    -DCMAKE_BUILD_TYPE=Release \
    -DOPUS_BUILD_SHARED_LIBRARY=ON

  make -j$(nproc)
  cd ../..
done
EOF

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–±–æ—Ä–∫—É
chmod +x build-android.sh
./build-android.sh

# 4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ –≤ –ø—Ä–æ–µ–∫—Ç
cp build-android/arm64-v8a/libopus.so     /path/to/fear-mobile/app/src/main/cpp/opus/libs/arm64-v8a/
cp build-android/armeabi-v7a/libopus.so   /path/to/fear-mobile/app/src/main/cpp/opus/libs/armeabi-v7a/
cp build-android/x86/libopus.so           /path/to/fear-mobile/app/src/main/cpp/opus/libs/x86/
cp build-android/x86_64/libopus.so        /path/to/fear-mobile/app/src/main/cpp/opus/libs/x86_64/

# 5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ—á–Ω—ã–µ —Ñ–∞–π–ª—ã
cp -r include/opus /path/to/fear-mobile/app/src/main/cpp/opus/include/
```

### JNI –æ–±–µ—Ä—Ç–∫–∞

–§–∞–π–ª `app/src/main/cpp/opus_jni.cpp` —Å–æ–¥–µ—Ä–∂–∏—Ç JNI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Opus –∏–∑ Kotlin.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- `Java_com_fear_OpusCodec_nativeCreateEncoder` - —Å–æ–∑–¥–∞–Ω–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞
- `Java_com_fear_OpusCodec_nativeCreateDecoder` - —Å–æ–∑–¥–∞–Ω–∏–µ –¥–µ–∫–æ–¥–µ—Ä–∞
- `Java_com_fear_OpusCodec_nativeEncode` - –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ PCM ‚Üí Opus
- `Java_com_fear_OpusCodec_nativeDecode` - –¥–µ–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏–µ Opus ‚Üí PCM
- `Java_com_fear_OpusCodec_nativeDestroyEncoder` - –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ —ç–Ω–∫–æ–¥–µ—Ä–∞
- `Java_com_fear_OpusCodec_nativeDestroyDecoder` - –æ—Å–≤–æ–±–æ–∂–¥–µ–Ω–∏–µ –¥–µ–∫–æ–¥–µ—Ä–∞

---

## –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: "SDK location not found"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª local.properties –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
echo "sdk.dir=/path/to/Android/Sdk" > local.properties

# –ù–∞–ø—Ä–∏–º–µ—Ä:
# Windows: sdk.dir=C\:\\Users\\YourName\\AppData\\Local\\Android\\Sdk
# macOS:   sdk.dir=/Users/YourName/Library/Android/sdk
# Linux:   sdk.dir=/home/yourname/Android/Sdk
```

### –ü—Ä–æ–±–ª–µ–º–∞: "NDK not configured"

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Android Studio ‚Üí SDK Manager
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SDK Tools
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ "NDK (Side by side)"
4. –í `local.properties` –¥–æ–±–∞–≤—å—Ç–µ:
```properties
ndk.dir=/path/to/Android/Sdk/ndk/25.1.8937393
```

### –ü—Ä–æ–±–ª–µ–º–∞: "CMake not found"

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ Android Studio ‚Üí SDK Manager
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ SDK Tools
3. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ "CMake"

### –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ native –∫–æ–¥–∞

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ native build
./gradlew clean
rm -rf app/.cxx
rm -rf app/build

# –ü–µ—Ä–µ—Å–æ–±–µ—Ä–∏—Ç–µ
./gradlew assembleDebug
```

### –ü—Ä–æ–±–ª–µ–º–∞: "Execution failed for task ':app:mergeDebugNativeLibs'"

**–†–µ—à–µ–Ω–∏–µ:**
–£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ `.so` —Ñ–∞–π–ª—ã –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É—é—Ç –≤ `app/src/main/cpp/opus/libs/`

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫
ls -R app/src/main/cpp/opus/libs/
```

### –ü—Ä–æ–±–ª–µ–º–∞: Gradle sync failed

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –û—á–∏—Å—Ç–∏—Ç–µ Gradle –∫—ç—à
rm -rf ~/.gradle/caches

# –í Android Studio:
# File ‚Üí Invalidate Caches ‚Üí Invalidate and Restart
```

### –ü—Ä–æ–±–ª–µ–º–∞: "INSTALL_FAILED_UPDATE_INCOMPATIBLE"

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –≤–µ—Ä—Å–∏—é –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
adb uninstall com.fear

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–Ω–æ–≤–æ
adb install app/build/outputs/apk/debug/app-debug.apk
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –í—Å–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
adb logcat -s "ACM_DEBUG" "FC_DEBUG" "MainActivity" "OpusJNI"

# –¢–æ–ª—å–∫–æ –∞—É–¥–∏–æ –ª–æ–≥–∏
adb logcat -s "ACM_DEBUG"

# –û—á–∏—Å—Ç–∫–∞ –ª–æ–≥–æ–≤
adb logcat -c
```

### –ê–Ω–∞–ª–∏–∑ APK

```bash
# –†–∞–∑–º–µ—Ä APK
ls -lh app/build/outputs/apk/release/*.apk

# –°–æ–¥–µ—Ä–∂–∏–º–æ–µ APK
unzip -l app/build/outputs/apk/release/app-release.apk

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä
unzip -l app/build/outputs/apk/release/app-release.apk | grep libopus.so
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤

```bash
# Unit —Ç–µ—Å—Ç—ã
./gradlew test

# Instrumented —Ç–µ—Å—Ç—ã (—Ç—Ä–µ–±—É–µ—Ç—Å—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ/—ç–º—É–ª—è—Ç–æ—Ä)
./gradlew connectedAndroidTest
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [Android Developer Documentation](https://developer.android.com/docs)
- [Opus Codec Documentation](https://opus-codec.org/docs/)
- [Gradle Build Tool](https://gradle.org/guides/)
- [CMake Documentation](https://cmake.org/documentation/)

---

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ï—Å–ª–∏ —É –≤–∞—Å –≤–æ–∑–Ω–∏–∫–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ [Issues](https://github.com/shchuchkin-pkims/fear-mobile/issues)
2. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã
3. –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –ª–æ–≥–∏ –∏ –≤–µ—Ä—Å–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤

---

**–£—Å–ø–µ—à–Ω–æ–π —Å–±–æ—Ä–∫–∏! üöÄ**
